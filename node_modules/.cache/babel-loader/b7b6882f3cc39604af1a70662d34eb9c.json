{"ast":null,"code":"var _jsxFileName = \"C:\\\\AppServ\\\\www\\\\adminace\\\\src\\\\context\\\\appState.js\";\nimport React, { useReducer, useEffect } from 'react';\nimport appContext from './appContext';\nimport appReducer from './appReducer';\nimport { LOGIN_EXITOSO, LOGIN_ERROR } from '../types';\nimport { validToken } from '../services/auth';\n\nconst AppState = props => {\n  const initialState = {\n    token: localStorage.getItem(process.env.REACT_APP_TOKEN_NAME),\n    user: null\n  };\n  const [state, dispatch] = useReducer(appReducer, initialState);\n\n  const setLogin = data => {\n    dispatch({\n      type: LOGIN_EXITOSO,\n      payload: data\n    });\n  };\n\n  const setRegister = data => {\n    dispatch({\n      type: LOGIN_EXITOSO,\n      payload: data\n    });\n  };\n\n  const setLogout = () => {\n    dispatch({\n      type: LOGIN_ERROR\n    });\n  };\n\n  useEffect(() => {\n    const token = localStorage.getItem(process.env.REACT_APP_TOKEN_NAME);\n\n    const validar = async () => {\n      console.log(\"Validando Token\");\n      const resp = await validToken();\n      console.log(resp.status);\n    };\n\n    if (token) validar();\n  }, []);\n  return /*#__PURE__*/React.createElement(appContext.Provider, {\n    value: {\n      user: state.user,\n      token: state.token,\n      setLogin,\n      setRegister,\n      setLogout\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 5\n    }\n  }, props.children);\n};\n\nexport default AppState;","map":{"version":3,"sources":["C:/AppServ/www/adminace/src/context/appState.js"],"names":["React","useReducer","useEffect","appContext","appReducer","LOGIN_EXITOSO","LOGIN_ERROR","validToken","AppState","props","initialState","token","localStorage","getItem","process","env","REACT_APP_TOKEN_NAME","user","state","dispatch","setLogin","data","type","payload","setRegister","setLogout","validar","console","log","resp","status","children"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,UAAf,EAA2BC,SAA3B,QAA2C,OAA3C;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,SACEC,aADF,EAEEC,WAFF,QAGO,UAHP;AAIA,SAASC,UAAT,QAA2B,kBAA3B;;AAEA,MAAMC,QAAQ,GAAGC,KAAK,IAAI;AACxB,QAAMC,YAAY,GAAG;AACnBC,IAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqBC,OAAO,CAACC,GAAR,CAAYC,oBAAjC,CADY;AAEnBC,IAAAA,IAAI,EAAE;AAFa,GAArB;AAKA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBlB,UAAU,CAACG,UAAD,EAAaM,YAAb,CAApC;;AAEA,QAAMU,QAAQ,GAAGC,IAAI,IAAI;AACvBF,IAAAA,QAAQ,CAAC;AACPG,MAAAA,IAAI,EAAEjB,aADC;AAEPkB,MAAAA,OAAO,EAAEF;AAFF,KAAD,CAAR;AAID,GALD;;AAOA,QAAMG,WAAW,GAAGH,IAAI,IAAI;AAC1BF,IAAAA,QAAQ,CAAC;AACPG,MAAAA,IAAI,EAAEjB,aADC;AAEPkB,MAAAA,OAAO,EAAEF;AAFF,KAAD,CAAR;AAID,GALD;;AAOA,QAAMI,SAAS,GAAG,MAAM;AACtBN,IAAAA,QAAQ,CAAC;AACPG,MAAAA,IAAI,EAAEhB;AADC,KAAD,CAAR;AAGD,GAJD;;AAMAJ,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMS,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqBC,OAAO,CAACC,GAAR,CAAYC,oBAAjC,CAAd;;AACA,UAAMU,OAAO,GAAG,YAAW;AACvBC,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACA,YAAMC,IAAI,GAAG,MAAMtB,UAAU,EAA7B;AACAoB,MAAAA,OAAO,CAACC,GAAR,CAAYC,IAAI,CAACC,MAAjB;AACH,KAJD;;AAKA,QAAInB,KAAJ,EACEe,OAAO;AACV,GATQ,EASN,EATM,CAAT;AAWA,sBACE,oBAAC,UAAD,CAAY,QAAZ;AACA,IAAA,KAAK,EAAE;AACLT,MAAAA,IAAI,EAAEC,KAAK,CAACD,IADP;AAELN,MAAAA,KAAK,EAAEO,KAAK,CAACP,KAFR;AAGLS,MAAAA,QAHK;AAILI,MAAAA,WAJK;AAKLC,MAAAA;AALK,KADP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQGhB,KAAK,CAACsB,QART,CADF;AAYD,CAnDD;;AAqDA,eAAevB,QAAf","sourcesContent":["import React, {useReducer, useEffect} from 'react';\r\nimport appContext from './appContext';\r\nimport appReducer from './appReducer';\r\nimport {\r\n  LOGIN_EXITOSO,\r\n  LOGIN_ERROR\r\n} from '../types';\r\nimport { validToken } from '../services/auth';\r\n\r\nconst AppState = props => {\r\n  const initialState = {\r\n    token: localStorage.getItem(process.env.REACT_APP_TOKEN_NAME),\r\n    user: null,\r\n  }\r\n\r\n  const [state, dispatch] = useReducer(appReducer, initialState);\r\n\r\n  const setLogin = data => {\r\n    dispatch({\r\n      type: LOGIN_EXITOSO,\r\n      payload: data\r\n    });\r\n  }\r\n\r\n  const setRegister = data => {\r\n    dispatch({\r\n      type: LOGIN_EXITOSO,\r\n      payload: data\r\n    });\r\n  }\r\n\r\n  const setLogout = () => {\r\n    dispatch({\r\n      type: LOGIN_ERROR\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(process.env.REACT_APP_TOKEN_NAME);\r\n    const validar = async() => {\r\n        console.log(\"Validando Token\");\r\n        const resp = await validToken();\r\n        console.log(resp.status);\r\n    }\r\n    if (token)\r\n      validar();\r\n  }, []);\r\n\r\n  return(\r\n    <appContext.Provider\r\n    value={{\r\n      user: state.user,\r\n      token: state.token,\r\n      setLogin,\r\n      setRegister,\r\n      setLogout,\r\n    }} >\r\n      {props.children}\r\n    </appContext.Provider>\r\n  );\r\n}\r\n\r\nexport default AppState;\r\n"]},"metadata":{},"sourceType":"module"}